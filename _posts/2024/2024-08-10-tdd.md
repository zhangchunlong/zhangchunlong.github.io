---
layout: post
title: TDD学习
categories:
- 技术
tags:
- 软件工程
---

测试驱动开发，英文全称Test-Driven Development，简称TDD，是一种不同于传统软件开发流程的新型的开发方法。它要求在编写某个功能的代码之前先编写测试代码，然后只编写使测试通过的功能代码，通过测试来推动整个开发的进行。

Kent Beck在Test-Driven Development by Example 开头中给出了 TDD 的基本原则：
#####当且仅当存在失败的自动化测试时，才开始编写生产代码 
#####消除重复
同时将TDD的开发工作分成了三步-红/绿/重构
#####红：编写一个失败的小测试，甚至可以是无法编译的测试  
#####绿：让这个测试快速通过，甚至不惜犯下任何罪恶
#####重构：消除上一步中产生的所有重复（坏味道）

在AI如此盛行的2024年，为什么现在还要学习20年的老技术？当前AI还会产生幻觉，生成的代码具有不确定性，个人认为可以通过自动化的测试保证生成代码的功能是保证AI生成代码功能的一个方法，为此专门在极客时间上学习了徐昊老师的"TDD项目实战"。

徐昊老师在2006年总结任务分解法，并将任务分解法作为TDD的核心要素。  
![tdd_task_decomposition](/media/pic/tdd_task_decomposition.png'tdd_task_decomposition')  
1. 需求分解为功能点，也就是将需求转化为一系列可验证的里程碑点；  
2. 如果已经存在架构或架构愿景，则依据架构中定义的组件与交互，将功能点分解为不同的功能上下文； 如果尚不存在架构愿景，则可以将功能点作为功能上下文；  
3. 将功能点按照功能上下文，分解为任务项。也就是进一步将可验证的里程碑点，分解为功能上下文中可验证的任务项；  
4. 将任务项转化为自动化测试，进入红 / 绿 / 重构循环，驱动功能上下文内的功能实现；  
5. 如果重构涉及功能上下文的重新划分，即提取 / 合并组件，即视作对于架构的重构与梳理。需调整后续功能点中对于功能上下文以及任务项的划分。  
6. 如此往复，直到所有功能完成

举个例子：用户登录功能，这就是一个功能点， 登录涉及Console，后端认证模块， Console和后端认证模块就是功能上下文，在其中分配任务项。






